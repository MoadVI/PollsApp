(function(){"use strict";var t={9868:function(t,e,o){var n=o(5130),l=o(6768);function a(t,e){const o=(0,l.g2)("router-link"),n=(0,l.g2)("router-view");return(0,l.uX)(),(0,l.CE)(l.FK,null,[(0,l.Lk)("nav",null,[(0,l.bF)(o,{to:"/",class:"buttons"},{default:(0,l.k6)((()=>e[0]||(e[0]=[(0,l.eW)("Home")]))),_:1})]),(0,l.bF)(n)],64)}var s=o(1241);const u={},i=(0,s.A)(u,[["render",a]]);var r=i,c=o(1387),p=o(4232);const d={class:"home-container"},v={class:"form-container"},f={class:"options-container"},h=["onUpdate:modelValue","placeholder"],b={class:"buttons"},m={class:"Polls"},k={class:"question"},y={class:"participants"};function O(t,e,o,a,s,u){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",d,[(0,l.Lk)("div",v,[(0,l.Lk)("form",{onSubmit:e[2]||(e[2]=(0,n.D$)(((...t)=>a.createPoll&&a.createPoll(...t)),["prevent"]))},[e[4]||(e[4]=(0,l.Lk)("label",null,"Type a poll question below",-1)),(0,l.bo)((0,l.Lk)("input",{type:"text",minlength:"10",placeholder:"Enter a question",class:"poll-option","onUpdate:modelValue":e[0]||(e[0]=t=>a.pollQuestion=t),required:""},null,512),[[n.Jo,a.pollQuestion]]),e[5]||(e[5]=(0,l.Lk)("label",null,"Enter as many poll choices as you like",-1)),(0,l.Lk)("div",f,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.pollOptions,((t,e)=>(0,l.bo)(((0,l.uX)(),(0,l.CE)("input",{key:e,"onUpdate:modelValue":t=>a.pollOptions[e]=t,type:"text",placeholder:"Option "+(e+1),class:"poll-option",required:""},null,8,h)),[[n.Jo,a.pollOptions[e]]]))),128))]),(0,l.Lk)("div",b,[e[3]||(e[3]=(0,l.Lk)("button",{type:"submit",class:"btn btn-create"},"Create this poll",-1)),(0,l.Lk)("button",{type:"button",onClick:e[1]||(e[1]=(...t)=>a.addOption&&a.addOption(...t)),class:"btn btn-add"},"Add another option")])],32)]),(0,l.Lk)("div",m,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.polls_data,(t=>((0,l.uX)(),(0,l.CE)("div",{key:t.id},[(0,l.bF)(i,{to:`/result/${t.id}`,id:"link"},{default:(0,l.k6)((()=>[(0,l.Lk)("div",k,[(0,l.eW)((0,p.v_)(t.question)+" ",1),(0,l.Lk)("div",y,(0,p.v_)(a.total(t))+" participants",1)])])),_:2},1032,["to"])])))),128))])])}o(4114),o(8111),o(1701);var g=o(144),w={name:"PollsHome",setup(){const t=(0,g.KR)([]),e=(0,g.KR)(""),o=(0,g.KR)(["",""]),n=(0,c.rd)();function a(){o.value.push("")}async function s(){const t={question:e.value,options:o.value.map((t=>({name:t,votes:0})))},l=await fetch("https://full-equable-shamrock.glitch.me/polls",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),a=await l.json();n.push(`/result/${a.id}`)}const u=t=>{let e=0;for(let o=0;o<t.options.length;o++)e+=t.options[o].votes;return e};async function i(){const e=await fetch("https://full-equable-shamrock.glitch.me/polls"),o=await e.json();t.value=o}return(0,l.sV)((()=>{i()})),{pollQuestion:e,pollOptions:o,addOption:a,createPoll:s,polls_data:t,total:u}}};const L=(0,s.A)(w,[["render",O],["__scopeId","data-v-9fab6752"]]);var _=L;const C={class:"vote"},E={class:"option-label"},q=["value"],K={class:"btn"};function P(t,e,o,a,s,u){const i=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",C,[(0,l.Lk)("h1",null,(0,p.v_)(a.pollQuestion),1),((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(a.pollOptions,((t,o)=>((0,l.uX)(),(0,l.CE)("div",{key:o,class:"option"},[(0,l.Lk)("label",E,[(0,l.bo)((0,l.Lk)("input",{type:"checkbox",value:t.name,"onUpdate:modelValue":e[0]||(e[0]=t=>a.selectedOptions=t)},null,8,q),[[n.lH,a.selectedOptions]]),(0,l.eW)(" "+(0,p.v_)(t.name),1)])])))),128)),(0,l.Lk)("div",K,[(0,l.Lk)("button",{onClick:e[1]||(e[1]=(...t)=>a.submitVotes&&a.submitVotes(...t)),class:"submit"},"Submit"),(0,l.bF)(i,{to:`/result/${a.pollId}`,class:"results-page"},{default:(0,l.k6)((()=>e[2]||(e[2]=[(0,l.eW)("View Results")]))),_:1},8,["to"])])])}o(7588);var V={name:"PollVote",setup(){const t=(0,c.lq)(),e=(0,c.rd)(),o=(0,g.KR)(""),n=(0,g.KR)([]),a=(0,g.KR)([]),s=(0,g.KR)(0);(0,l.sV)((async()=>{const e=await fetch(`https://full-equable-shamrock.glitch.me/polls/${t.params.id}`),l=await e.json();s.value=l.id,o.value=l.question,n.value=l.options}));const u=async()=>{const o=await fetch(`https://full-equable-shamrock.glitch.me/polls/${t.params.id}`),n=await o.json();n.options.forEach((t=>{a.value.includes(t.name)&&(t.votes+=1)})),await fetch(`https://full-equable-shamrock.glitch.me/polls/${t.params.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),e.push(`/result/${s.value}`)};return{pollQuestion:o,pollOptions:n,pollId:s,selectedOptions:a,submitVotes:u}}};const j=(0,s.A)(V,[["render",P],["__scopeId","data-v-1231702a"]]);var F=j;const R={class:"results"},X={id:"percentage"},I={class:"btn"};function $(t,e,o,n,a,s){const u=(0,l.g2)("router-link");return(0,l.uX)(),(0,l.CE)("div",R,[(0,l.Lk)("h1",null,(0,p.v_)(n.pollQuestion),1),(0,l.Lk)("ul",null,[((0,l.uX)(!0),(0,l.CE)(l.FK,null,(0,l.pI)(n.pollOptions,((t,e)=>((0,l.uX)(),(0,l.CE)("li",{key:e},[(0,l.eW)((0,p.v_)(t.name)+" ",1),(0,l.Lk)("div",X,(0,p.v_)(n.calculatePercentage(t.votes))+"%",1)])))),128))]),(0,l.Lk)("div",I,[(0,l.bF)(u,{to:`/vote/${n.pollId}`,class:"vote-section"},{default:(0,l.k6)((()=>e[0]||(e[0]=[(0,l.eW)("Vote")]))),_:1},8,["to"]),(0,l.bF)(u,{to:"/",class:"back-button"},{default:(0,l.k6)((()=>e[1]||(e[1]=[(0,l.eW)("Back")]))),_:1})])])}var x={name:"PollResult",setup(){const t=(0,c.lq)(),e=(0,g.KR)(""),o=(0,g.KR)([]),n=(0,g.KR)("");(0,l.sV)((async()=>{const l=await fetch(`https://full-equable-shamrock.glitch.me/polls/${t.params.id}`),a=await l.json();n.value=a.id,e.value=a.question,o.value=a.options}));const a=t=>{let e=0;for(let n=0;n<o.value.length;n++)e+=o.value[n].votes;return e>0?(t/e*100).toFixed(2):0};return{pollQuestion:e,pollOptions:o,pollId:n,calculatePercentage:a}}};const Q=(0,s.A)(x,[["render",$],["__scopeId","data-v-7112453a"]]);var T=Q;const W=[{path:"/",name:"home",component:_},{path:"/vote/:id",name:"PollVote",component:F},{path:"/result/:id",name:"PollResult",component:T}],A=(0,c.aE)({history:(0,c.Bt)(),routes:W});var S=A;(0,n.Ef)(r).use(S).mount("#app")}},e={};function o(n){var l=e[n];if(void 0!==l)return l.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,o),a.exports}o.m=t,function(){var t=[];o.O=function(e,n,l,a){if(!n){var s=1/0;for(c=0;c<t.length;c++){n=t[c][0],l=t[c][1],a=t[c][2];for(var u=!0,i=0;i<n.length;i++)(!1&a||s>=a)&&Object.keys(o.O).every((function(t){return o.O[t](n[i])}))?n.splice(i--,1):(u=!1,a<s&&(s=a));if(u){t.splice(c--,1);var r=l();void 0!==r&&(e=r)}}return e}a=a||0;for(var c=t.length;c>0&&t[c-1][2]>a;c--)t[c]=t[c-1];t[c]=[n,l,a]}}(),function(){o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,{a:e}),e}}(),function(){o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={524:0};o.O.j=function(e){return 0===t[e]};var e=function(e,n){var l,a,s=n[0],u=n[1],i=n[2],r=0;if(s.some((function(e){return 0!==t[e]}))){for(l in u)o.o(u,l)&&(o.m[l]=u[l]);if(i)var c=i(o)}for(e&&e(n);r<s.length;r++)a=s[r],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(c)},n=self["webpackChunkapp"]=self["webpackChunkapp"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=o.O(void 0,[504],(function(){return o(9868)}));n=o.O(n)})();
//# sourceMappingURL=app.3d5a72ce.js.map